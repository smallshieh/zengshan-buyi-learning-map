# 規格變更管理

**版本**: 1.0.0  
**最後更新**: 2026-02-04

---

## 變更流程

### 1. 提出變更請求 (Change Request)

**觸發條件**:
- 發現規格不足
- 新的需求出現
- 實作中遇到問題
- 改進建議

**提交格式**:
```markdown
## CR-{編號}: {變更標題}

**提出者**: {名字}  
**日期**: YYYY-MM-DD  
**優先級**: High/Medium/Low  
**影響範圍**: {哪些組件受影響}

### 問題描述
{當前規格的不足或問題}

### 建議的變更
{具體的變更內容}

### 影響評估
- 向後相容性: Yes/No
- 需要更新的文檔: {列表}
- 需要更新的程式碼: {列表}

### 替代方案
{其他可能的解決方案}
```

---

### 2. 審查階段 (Review)

**審查者**: 規格維護者 + 利害關係人

**審查清單**:
- [ ] 變更是否合理?
- [ ] 是否有替代方案?
- [ ] 影響範圍評估是否完整?
- [ ] 是否需要更新現有實作?
- [ ] 文檔更新範圍是否明確?

**決策**:
- ✅ **批准** → 進入實作階段
- ⚠️ **修改後批准** → 提出者修改後重新提交
- ❌ **拒絕** → 說明理由,關閉請求

---

### 3. 實作階段 (Implementation)

**步驟**:
1. 更新規格文檔
2. 更新實作程式碼 (如需要)
3. 更新相關文檔
4. 執行測試
5. 更新變更記錄

---

### 4. 驗證階段 (Verification)

**驗證項目**:
- [ ] 規格文檔已更新
- [ ] 實作符合新規格
- [ ] 測試通過
- [ ] 文檔一致性檢查通過
- [ ] 變更記錄已更新

---

## 版本控制

### 版本號規則

**格式**: `MAJOR.MINOR.PATCH`

- **MAJOR**: 不向後相容的重大變更
- **MINOR**: 向後相容的功能新增
- **PATCH**: 向後相容的錯誤修正

**範例**:
- `1.0.0` → `1.0.1`: 修正錯字或小錯誤
- `1.0.1` → `1.1.0`: 新增一個可選組件
- `1.1.0` → `2.0.0`: 改變核心架構

---

### 變更記錄範本

```markdown
## [1.1.0] - 2026-02-10

### Added
- 新增 translation-skill 規格
- 新增 API 文檔生成工作流程

### Changed
- 更新 quality_reviewer.py 介面規範
- 調整品質門檻標準

### Deprecated
- agent_v1 介面 (將在 2.0.0 移除)

### Removed
- 無

### Fixed
- 修正座標格式規範中的錯誤
- 更正 TASK_MATRIX 範例

### Security
- 無
```

---

## 規格凍結

### 何時凍結規格?

在以下情況下凍結規格:
- 即將進入大規模實作
- 需要確保穩定性
- 準備發布新版本

### 凍結期間

**允許**:
- 錯誤修正 (PATCH 版本)
- 文檔澄清

**不允許**:
- 新增功能 (MINOR 版本)
- 架構變更 (MAJOR 版本)

---

## 文檔一致性

### 檢查清單

定期檢查以下文檔一致性:

```markdown
- [ ] SYSTEM_SPEC.md 與 PROTOCOL.md 一致
- [ ] 組件規格與實際程式碼一致
- [ ] AGENTS.md 與 agent_gatekeeper.py 一致
- [ ] TASK_MATRIX.md 與實際能力評估一致
- [ ] 所有範例程式碼可執行
- [ ] 所有連結有效
```

---

## 回溯相容性

### 策略

1. **保留舊介面**: 至少一個 MINOR 版本
2. **提供遷移指南**: MAJOR 版本變更時
3. **標記棄用**: 使用 `@deprecated` 標記
4. **版本支援**: 支援最近 2 個 MAJOR 版本

### 棄用流程

```
v1.5.0: 標記為 @deprecated
v1.6.0: 發出棄用警告
v2.0.0: 正式移除,提供遷移指南
```

---

**維護者**: User  
**聯絡方式**: 見專案 README
